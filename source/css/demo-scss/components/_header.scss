// Utilities nav container styles
.utilities-nav-container {
	background: $color-gray-20;
	height: 0;

	.container {
		display: flex;
		justify-content: space-between;
	}

	.nav-pr-links {
		display: none;
	}

	.nav-utilities {
		width: 80%;
		background: $color-white;
		height: rem(60px);
		position: fixed;
		max-width: calc(100% - 80px);
		z-index: 101;
		left: 0;
		display: none;

		.utilities-nav-item {
			display: none;
		}
	}

	.utilities-nav-item {
		@include text-style-1;
		color: $color-brand-astronaut;
		padding: rem(7px) rem(10px);
		position: relative;

		.language-name {
			@include text-style-1;
		}

		&:after {
			content: " ";
			width: rem(1px);
			height: rem(12px);
			right: 0;
			top: rem(7px);
			display: inline-block;
			position: absolute;
			border-left: solid rem(1px) $color-brand-astronaut;
		}

		&:last-child {
			&:after {
				display: none;
			}
		}

	}

	.change-language-wrapper {
		position: relative;

		&:after {
			display: none;
		}

		.language-control {
			@include text-style-1;
			font-size: rem(9px);
			color: $color-brand-dodger-blue;

			&:after {
				display: none;
			}
		}
	}

	@include media-breakpoint-up(md) {
		display: block;
		height: auto;

		.utilities-nav-links {
			height: rem(26px);
		}

		.nav-pr-links {
			display: flex;
			background-color: $color-gray-42;
		}

		.nav-utilities {
			display: flex;
			position: static;
			width: auto;
			height: auto;
			background: transparent;

			.utilities-nav-item {
				display: block;
			}
		}

		.change-language-wrapper {
			.language-selector {
				position: absolute;
				background: $color-brand-dodger-blue;
				left: auto !important;
				right: 0;
				min-height: 60px;
				transform: none !important;
				top: rem(26px) !important;
				margin: 0;
				padding: rem(13px 7px);
				min-width: auto;
				width: 100%;
				border-radius: 0;

				&:after {
					content: '';
					display: block;
					position: absolute;
					width: 0;
					height: 0;
					top: -5px;
					right: rem(20px);
					border-left: rem(5px) solid transparent;
					border-right: rem(5px) solid transparent;
					border-bottom: rem(5px) solid $color-brand-dodger-blue;
				}

				.language-selector-link {
					@include text-style-1;
					color: $color-white;
				}
			}
		}
	}
}

// Utilities nav - search box
.utilities-search {
	position: relative;
	margin-left: rem(30px);
	height: rem(60px);

	.fa-search {
		display: none;
	}

	.input-search {
		@include text-style-1;
		color: $color-brand-astronaut;
		margin-top: rem(15px);
		padding: rem(6px 5px 7px 15px);
		font-size: rem(16px);
		width: rem(170px);
		height: rem(32px);
		border-radius: rem(4px);
		background-color: $color-white;
		border: solid rem(1px) $color-gray-65;
	}

	.btn {
		display: none;
	}

  .autocomplete-popup {
    position: absolute;
    top: rem(47px);
    width: rem(170px);
  }

	@include media-breakpoint-up(md) {
		height: auto;
		left: auto;

		.fa-search {
			display: block;
			position: absolute;
			left: rem(8px);
			top: rem(6px);
			font-size: rem(13px);
			color: $color-brand-astronaut;
		}

		.input-search {
			width: rem(126px);
			height: rem(21px);
			font-size: rem(10px);
			margin: 0;
			padding: rem(5px 5px 2px 25px);
		}

		.btn {
			font-size: rem(10px);
			width: rem(70px);
			height: rem(21px);
			padding-top: rem(5px);
			padding-bottom: rem(4px);
			display: inline-block;
		}

    .autocomplete-popup {
      top: rem(23px);
      width: rem(126px);
    }
	}
}

// Navbar
.navbar {
	padding: 0;
	border-bottom: rem(4px) solid $color-brand-dodger-blue;

	> .container {
		height: rem(60px);
		justify-content: unset;
	}

	.navbar-nav {
		border-bottom: rem(3px) solid $color-brand-astronaut;
		background: $color-white;
		width: 80%;
	}

	.navbar-toggler {
		z-index: 102;

		.navbar-toggler-line {
			width: rem(27px);
			height: rem(3px);
			background-color: $color-brand-astronaut;
			margin: rem(5px 0);
			display: block;
		}

		.fa-times {
			display: none;
		}
	}

	.navbar-brand {
		position: absolute;
		left: 0;
		right: 0;
		top: rem(20px);
		margin: auto;
		width: rem(120px);
		padding: 0;

		img {
			width: 100%;
		}
	}

	.navbar-collapse {
		position: absolute;
		padding-top: rem(64px);
		top: 0;
		width: 100%;
		background: transparent;
		z-index: 100;
		max-height: calc(100vh - 60px);
		overflow: auto;
		left: 0;

		&.collapse {
			visibility: hidden;
			display: block;

			&.show {
				visibility: visible;
			}
		}
	}

	@include media-breakpoint-up(md) {
		border-bottom: none;

		&.login-form-expanded {
			.navbar-collapse {
				position: relative;
			}
		}

	.navbar-nav {
			border-bottom: none;
			width: 100%;
		}

		.navbar-brand {
			position: relative;
			width: auto;
			margin: rem(16px 0 10px);
			top: 0;
		}

		.navbar-collapse {
			padding-top: 0;
			position: static;
			margin-left: rem(35px);
			max-height: none;
			width: auto;
			overflow: visible;

			&.collapse {
				visibility: visible;
				display: none;
			}
		}
	}
}

// Navigation link item
.nav-item {
	position: relative;

	&.show {

		.nav-link {
			background: $color-brand-dodger-blue;
			color: $color-white;

			i {
				transform: rotate(180deg);
			}
		}
	}

	.nav-link {
		@include text-style-2;
		color: $color-brand-astronaut;
		border-bottom: 1px solid $color-gray-65;
		padding: rem(17px 0 15px 15px);

		i {
			font-size: rem(14px);
			line-height: .5;
			padding-left: rem(4px);
			position: absolute;
			top: rem(25px);
			right: rem(25px);
		}

		&:after {
			display: none;
		}
	}

	@include media-breakpoint-up(md) {
		position: static;

		&.show {
			background: $color-gray-09;
			border-bottom: none;

			.nav-link {
				background: transparent;
				color: $color-brand-astronaut;

				i {
					right: rem(-4px);
					top: 0;
				}
			}
		}

		.nav-link {
			line-height: rem(60px);
			padding-top: 0;
			padding-bottom: 0;
			margin: rem(0 7px);
			border-bottom: 0;

			i {
				position: relative;
				top: rem(2px);
				right: 0;
			}
		}
	}
}

// Navigation sub menu items
.nav-sub-menu-container {
	width: 100%;
	margin: 0;
	border-radius: 0;
	border: 0;
	padding: 0 calc(#{$grid-gutter-width} / 2);

	.nav-sub-menu-group {
		min-width: 100%;
		border-bottom: 1px solid $color-gray-65;

		.nav-sub-menu-group-head {
			@include text-style-2;
			font-size: rem(14px);
			color: $color-brand-astronaut;
			padding: rem(18px 0 15px 15px);

			&:hover {
				background: none;
				color: $color-brand-dodger-blue;
			}
		}

		.nav-sub-menu-group-links {
			display: none;
		}
	}

	@include media-breakpoint-up(md) {
		background: $color-gray-09;
		padding: rem(40px 0 100px);

		.nav-sub-menu-group {
			min-width: auto;
			border-bottom: 0;
			padding-right: rem(30px);

			.nav-sub-menu-group-head {
				color: $color-brand-dodger-blue;
				text-transform: uppercase;
				padding: 0;
				margin-bottom: rem(11px);
			}

			.nav-sub-menu-group-links {
				display: block;

				.dropdown-item {
					@include text-style-3;
					color: $color-gray-84;
					padding: 0;
					margin-bottom: rem(9px);

					&:hover {
						background: none;
						color: $color-brand-dodger-blue;
					}
				}
			}
		}
	}
}

// Login control
.account-access-wrapper {
	position: fixed;
	top: 0;
	right: 0;
	visibility: visible;

	&.show {
		.nav-link {
			background: $color-gray-09 none !important;
			color: $color-brand-astronaut;
			width: rem(100px);

			span {
				display: none;
			}

			i {
				padding-left: 0;

				&.icon-expand {
					display: none;
				}

				&.icon-close {
					display: block;
					font-size: rem(30px);
					right: rem(35px);
				}
			}
		}
	}

	.nav-link {
		display: flex;
		align-items: center;
		height: rem(60px);
		border: 0;
		background: none;
		white-space: nowrap;
		padding-right: rem(30px);
		margin: 0 0 0 auto;

		span {
			@include text-style-2;
			color: $color-brand-astronaut;
			margin-bottom: 0;
		}

		i {
			position: absolute;
			top: rem(30px);
			right: rem(15px);
			line-height: rem(7px);

			&.icon-close {
				display: none;
				color: $color-gray-95;
			}
		}
	}

	.logged-in-avatar {
		width: rem(90px);
		margin: 0;
		background: $color-white url(../../../images/user.svg) no-repeat center !important;

		span,
		.fa-angle-down {
			display: none;
		}
	}

	.nav-sub-menu-container {
		position: fixed;
		top: rem(64px);
	}

	@include media-breakpoint-up(md) {
		position: static;
		margin: 0 0 0 auto;

		&.show {
			.nav-link {
				width: auto;

				i {
					&.icon-expand {
						padding-left: rem(4px);
					}

					&.icon-close {
						display: none;
					}
				}
			}
		}
		.nav-link {
			width: auto;

			i {
				position: relative;
				top: rem(1px);
				right: 0;
			}
		}

		.logged-in-avatar {
			width: auto;
			background-image: none !important;
		}

		.nav-sub-menu-container {
			top: rem(60px);
		}
	}
}

// Sticky header
body.sticky-header {
	.navbar {
		position: fixed;
		width: 100%;
		top: 0;
		background: $color-white;
		z-index: 100;
		left: 0;
	}

	.main-content {
		margin-top: rem(60px);
	}

	@include media-breakpoint-up(md) {
		.navbar {
			border-bottom: 1px solid $color-gray-09;

			&.login-form-expanded {
				.navbar-collapse {
					position: static;
				}
			}
		}

		// Search styling
		.utilities-search {
			position: fixed;
			z-index: 101;
			top: rem(14px);
			margin: 0;
			width: rem(165px);

      &.search-collapsed {
        .input-search {
          display: none;
        }

        .autocomplete-popup {
          display: none;
        }
      }

			.fa-search {
				position: absolute;
				left: auto;
				right: 0;
				top: rem(1px);
				padding: rem(8px);
				border: 1px solid $color-brand-astronaut;
				border-radius: 50%;
				cursor: pointer;
			}

			.input-search {
				height: rem(32px);
				border: 1px solid $color-brand-astronaut;
				width: rem(165px);
				border-radius: rem(16px);
				text-transform: uppercase;
				@include font-MuseoSans('light');
				font-size: rem(12px);
				padding: rem(9px 35px 9px 20px);
				color: $color-brand-astronaut;
			}

			.btn {
				display: none;
			}

      .autocomplete-popup {
        display: block;
        top: rem(32px);
        width: rem(165px);
      }
		}

		// Logged in user menu
		.account-access-wrapper {
			.nav-sub-menu-container {
				top: rem(60px);
			}
		}
	}

}

// Expanded Nav on small screens
body.mobile-nav-expanded {
	@include media-breakpoint-down(sm) {
		overflow: hidden;

		.utilities-nav-container {
			.nav-utilities {
				display: block;
        width: rem(200px);
			}

			.utilities-search {
				left: auto !important;
			}
		}

		.navbar {
      .navbar-brand {
        display: none;
      }

			.navbar-toggler {
				position: relative;
				left: rem(210px);

				.navbar-toggler-line {
					display: none;
				}

				.fa-times {
					display: block;
					font-size: rem(28px);
				}
			}
		}
	}
}

// Utilities nav on small screens
.utilities-sm-nav {
	width: 80%;

	.utilities-sm-nav-item {
		display: block;
		@include text-style-2;
		font-size: rem(14px);
		color: $color-brand-astronaut;
		border-bottom: 1px solid $color-gray-65;
		padding: rem(17px 0 15px 30px);
		background-color: $color-gray-09;

		&:nth-last-child(-n+2) {
			background: $color-brand-astronaut;
			color: $color-white;
			width: 45%;
			float: left;
			padding-left: rem(15px);
			min-height: rem(65px);
			display: flex;
			align-items: center;
		}

    &:last-child {
      padding-left: 0;
      padding-right: rem(15px);
      width: 55%;
    }

    // Language Selector dropdown
    .language-select-box {
      position: relative;
      display: inline-block;
      width: 100%;
      max-width: rem(150px);

      select {
        display: inline-block;
        height: rem(30px);
        width: 100%;
        outline: none;
        font-size: rem(16px);
        border: none;
        background: $color-white;
        border-radius: rem(15px);
        padding: rem(0px 10px 0px 15px);
        color: $color-brand-dodger-blue;
      }

      &:after,
      &:before {
        font-family: "Font Awesome 5 Pro";
        position: absolute;
        top: 0;
        right: 0;
        width: rem(30px);
      }

      &:before {
        content: '\f106';
        z-index: 1;
        padding: (2px 0 0 8px);
      }

      &:after {
        background-color: $color-brand-dodger-blue;
        border-radius: rem(0 15px 15px 0);
        bottom: 0;
        font-size: rem(16px);
        pointer-events: none;
        color: $color-white;
        padding: rem(12px 0 0 8px);
      }
    }
	}
}

// Get a Quote section overrides for display in menu
.get-quote-wrapper.dropdown-menu {
  .sectionHead {
    color: $color-brand-astronaut;
    max-width: $content-width;
    padding: rem(30px $grid-gutter-width 0 $grid-gutter-width);
    text-align: center;
    margin: 0 auto;
  }

  @include media-breakpoint-up(md) {
    .sectionHead {
      text-align: left;
    }
  }
}
